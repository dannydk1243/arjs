<!DOCTYPE html>
<html>
<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>

<body style="margin : 0px; overflow: hidden;">
  <a-scene embedded arjs>
    <a-marker preset="custom" type="pattern" url="./assets/pattern.patt" id="marker">
      <a-entity id="animatedModel" position="0 0 0" scale="11 11 11" gltf-model="./assets/modal.glb"
        animation-mixer></a-entity>
    </a-marker>
    <a-entity camera></a-entity>
  </a-scene>
</body>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const marker = document.querySelector("#marker");
    const model = document.querySelector("#animatedModel");

    marker.addEventListener("markerFound", () => {
      console.log("Marker Found");
      let animationMixer = model.components["animation-mixer"];
      if (animationMixer) {
        animationMixer.stopAction();
        animationMixer.playAction();
      }
    });

    marker.addEventListener("markerLost", () => {
      console.log("Marker Lost");
      let animationMixer = model.components["animation-mixer"];
      if (animationMixer) {
        animationMixer.stopAction();
      }
    });
  });
</script>

</html>